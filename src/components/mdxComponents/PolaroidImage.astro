---
// src/components/PolaroidImage.astro
interface Props {
  src: string;
  alt: string;
  caption?: string;
  width?: string;
  rotate?: number | 'random';
  className?: string;
}

const { 
  src, 
  alt, 
  caption, 
  width = '100%', 
  rotate = 0,
  className = '' 
} = Astro.props;

// Generate rotation value
let rotation = 0;
if (rotate === 'random') {
  rotation = (Math.random() - 0.5) * 6; // Random between -3 and 3 degrees
} else if (typeof rotate === 'number') {
  rotation = rotate;
}
---

<div 
  class={`transition-transform duration-300 hover:rotate-0 my-5 mx-auto ${className}`}
  style={`max-width: ${width}; transform: rotate(${rotation}deg);`}
>
  <div class="bg-white p-3 shadow-2xl hover:shadow-3xl transition-shadow duration-300 mx-auto ">
      <img
        src={src}
        alt={alt}
        loading="lazy"
        class="w-full h-auto block mx-auto inset-shadow-xl"
      />
    
    {caption && (
      <div class="mt-3 text-center px-2">
        <p class="text-syoro !font-handwriting !text-xl sm:text-base leading-snug">
          {caption}
        </p>
      </div>
    )}
  </div>
</div>

<!-- Usage Example
<PolaroidImage
  src="path/to/image.jpg"
  alt="Description of the image"
  caption="Optional caption"
  rotate="random"
/>
-->