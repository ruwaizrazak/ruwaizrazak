---
// ContentCard.astro - Reusable card component for content items
export interface Props {
  title: string;
  description?: string;
  pubDate: Date;
  heroImage?: string;
  url: string;
  imageHeight?: string;
  maturity?: 'seed' | 'plant' | 'tree';
}

import { getMaturityIcon } from '../utils/maturityIcons';

const {
  title = 'Untitled',
  description = '',
  pubDate,
  heroImage,
  url,
  imageHeight = 'h-48',
  maturity
} = Astro.props;

const formattedDate = new Date(pubDate).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

const maturityIcon = maturity ? getMaturityIcon(maturity) : null;
---

<div class="group rounded-lg overflow-hidden hover:scale-95 transition-all duration-200 py-5">
  <a href={url} class="block p-5 bg-cardbg rounded-xl border-1 border-card-border shadow-xs group-hover:shadow-none relative">
    
    <div class="flex gap-2 mb-2 items-center">
      <img src="/icons/essays.svg" alt="tree icon" class="w-5">
      <h5 class="text-lg text-syoro opacity-80 uppercase ">Essays</h5>
    </div>
    {heroImage && (
      <img
        src={heroImage}
        alt={title}
        class={`w-full ${imageHeight} aspect-square object-cover rounded-lg mb-4`}
      />
    )}
    <h3 class="uppercase sm:capitalize text-2xl mb-2 md:text-2xl font-medium lg:text-3xl text-konpeki group-hover:text-link font-sans">{title}</h3>
    {description && <p class="text-base md:text-lg lg:text-xl text-syoro mb-4 font-serif">{description}</p>}
    <div class="text-base mt-4 opacity-50 uppercase flex items-center gap-2">
      {formattedDate}
      {maturity && (
        <div class="absolute right-3 flex items-center gap-2 px-2 py-1">
          {maturityIcon && (
            <img src={maturityIcon} alt={`${maturity} maturity`} class="w-4 h-4" />
          )}
          <span class="text-base uppercase text-syoro font-sans">{maturity}</span>
        </div>
      )}
    </div>
  </a>
</div>

<!--Usage Example
<ContentCard
      title={note.data.title || 'Untitled'}
      description={note.data.description || ''}
      pubDate={note.data.pubDate}
      heroImage={note.data.heroImage}
      url={`/notes/${note.slug}`}
      imageHeight="h-32"
    />
-->